var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function d(){return h(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o||n[o]&&n[o].set?t[o]=e[o]:m(t,o,e[o])}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function v(t,e){(null!=e||t.value)&&(t.value=e)}function b(t,e,n){t.classList[n?"add":"remove"](e)}let x;function w(t){x=t}function y(t){(function(){if(!x)throw new Error("Function called outside component initialization");return x})().$$.on_mount.push(t)}const _=[],S=[],k=[],M=[],j=Promise.resolve();let E=!1;function z(t){k.push(t)}let A=!1;const q=new Set;function C(){if(!A){A=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];w(e),T(e.$$)}for(_.length=0;S.length;)S.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];q.has(e)||(q.add(e),e())}k.length=0}while(_.length);for(;M.length;)M.pop()();E=!1,A=!1,q.clear()}}function T(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const I=new Set;let L;function H(t,e){t&&t.i&&(I.delete(t),t.i(e))}function D(t,e,n,o){if(t&&t.o){if(I.has(t))return;I.add(t),L.c.push(()=>{I.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function N(t){t&&t.c()}function F(t,e,o){const{fragment:i,on_mount:c,on_destroy:a,after_update:l}=t.$$;i&&i.m(e,o),z(()=>{const e=c.map(n).filter(r);a?a.push(...e):s(e),t.$$.on_mount=[]}),l.forEach(z)}function W(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function O(t,e){-1===t.$$.dirty[0]&&(_.push(t),E||(E=!0,j.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,n,r,i,c,a,l=[-1]){const f=x;w(e);const h=n.props||{},d=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:o(),dirty:l};let p=!1;if(d.ctx=r?r(e,h,(t,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=s)&&(d.bound[t]&&d.bound[t](s),p&&O(e,t)),n}):[],d.update(),p=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(u)}else d.fragment&&d.fragment.c();n.intro&&H(e.$$.fragment),F(e,n.target,n.anchor),C()}w(f)}class B{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}class P{constructor(t,e){this._color=function(){const t=16777215*Math.random()|0;return"#"+"0".repeat(Math.ceil(6-Math.log2(t)/4)-1)+t.toString(16)}(),this._speed=Math.random()*e+.125,this._seed=Math.random(),this._offset=65535*Math.random()|0,this._positionX=this._offset,this._positionY=(1-this._seed-this._offset%3)*t}draw(t,e,{width:n,height:o},s){if(this._positionY+=s*this._speed,this._positionY<o)return;const r=Math.cos((e+this._offset)/100);this._positionX+=(r+this._seed-.5)*(Math.sin(4095*this._seed)%1),t.fillStyle=this._color,t.setTransform(1,1-r,r,1,this._positionX%(n+5),this._positionY%(o+10)-10),t.fillRect(0,0,5,10)}}class R{constructor(t,e){this._canvas=t,this._context=this._canvas.getContext("2d"),addEventListener("resize",this.updateCanvasSize.bind(this),{passive:!0}),this._skewIndex=0;const n=Math.sqrt(window.innerWidth*window.innerHeight/200*e),o=Math.sqrt(e/6);this._confetti=Array.from({length:n},()=>new P(window.innerHeight,o)),this._draw=this.draw.bind(this),this._lastTimestamp=0,this.updateCanvasSize()}draw(t=0){const{width:e,height:n}=this._canvas,o=this._context,s=this._skewIndex++;o.resetTransform(),o.clearRect(0,0,e,n),this._confetti.forEach(r=>r.draw(o,s,{width:e,height:n},t-this._lastTimestamp)),this._lastTimestamp=t,requestAnimationFrame(this._draw)}updateCanvasSize(){this._canvas.height=document.documentElement.clientHeight,this._canvas.width=document.documentElement.clientWidth,this.draw()}}function X(n){let o,s,i,c=[n[2]],d={};for(let t=0;t<c.length;t+=1)d=e(d,c[t]);return{c(){o=f("button"),s=h(n[1]),g(o,d),b(o,"svelte-c88ozc",!0)},m(t,e,c){l(t,o,e),a(o,s),c&&i(),i=p(o,"click",(function(){r(n[0])&&n[0].apply(this,arguments)}))},p(t,[e]){n=t,2&e&&$(s,n[1]),g(o,function(t,e){const n={},o={},s={$$scope:1};let r=t.length;for(;r--;){const i=t[r],c=e[r];if(c){for(const t in i)t in c||(o[t]=1);for(const t in c)s[t]||(n[t]=c[t],s[t]=1);t[r]=c}else for(const t in i)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(c,[4&e&&n[2]])),b(o,"svelte-c88ozc",!0)},i:t,o:t,d(t){t&&u(o),i()}}}function G(t,n,o){const s=["handleClick","text"];let r=c(n,s),{handleClick:i=Function.prototype}=n,{text:a}=n;return t.$set=t=>{n=e(e({},n),function(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}(t)),o(2,r=c(n,s)),"handleClick"in t&&o(0,i=t.handleClick),"text"in t&&o(1,a=t.text)},[i,a,r]}class V extends B{constructor(t){super(),Y(this,t,G,X,i,{handleClick:0,text:1})}}function J(t){let e,n,o,s,r,i;const c=new V({props:{handleClick:t[0],text:"Start",autofocus:!0}});return{c(){e=f("header"),e.innerHTML='<h1 class="svelte-19xjjuz">Fluky</h1> \n  <h4 class="svelte-19xjjuz">Anything could happen</h4> \n  <p class="svelte-19xjjuz">\n    This web app is a reproduction of\n    <a href="http://fluky.io" class="svelte-19xjjuz">Fluky</a>\n    – a randomizer by\n    <a href="https://humblebee.se/" class="svelte-19xjjuz">Humblebee</a>\n    – made as an exercise by\n    <a href="https://github.com/aduh95" class="svelte-19xjjuz">aduh95</a></p>',n=d(),o=f("canvas"),s=d(),r=f("footer"),N(c.$$.fragment),m(e,"class","svelte-19xjjuz"),m(o,"id","confetti"),m(r,"class","svelte-19xjjuz")},m(t,a){l(t,e,a),l(t,n,a),l(t,o,a),l(t,s,a),l(t,r,a),F(c,r,null),i=!0},p(t,[e]){const n={};1&e&&(n.handleClick=t[0]),c.$set(n)},i(t){i||(H(c.$$.fragment,t),i=!0)},o(t){D(c.$$.fragment,t),i=!1},d(t){t&&u(e),t&&u(n),t&&u(o),t&&u(s),t&&u(r),W(c)}}}function K(t,e,n){let{nextStep:o}=e;return y(()=>new R(document.getElementById("confetti"),.05)),t.$set=t=>{"nextStep"in t&&n(0,o=t.nextStep)},[o]}class Q extends B{constructor(t){super(),Y(this,t,K,J,i,{nextStep:0})}}const U=(1+Math.sqrt(5))/2;let Z=Math.random();class tt{constructor(t){this._color=function(){const t=.3*Math.random()+.4,e=.4*Math.random()+.2;return Z+=U,`hsl(${Z}turn,${100*t}%,${100*e}%)`}(),this.label=t}get color(){return this._color}}function et(t,e,n){const o=t.slice();return o[7]=e[n],o[8]=e,o[9]=n,o}function nt(t){let e,n,o,r,i,c,h;function g(){t[6].call(i,t[7])}return{c(){e=f("div"),n=f("input"),r=d(),i=f("input"),m(n,"type","button"),n.value="x",m(n,"title","Delete entry"),m(n,"style",o=`background-color:${t[7].color}`),m(n,"class","svelte-1obivak"),m(i,"aria-label","Describe the item"),i.required=!0,m(i,"class","svelte-1obivak"),m(e,"role","group"),m(e,"aria-label",c=`Item #${t[9]+1}`),m(e,"class","svelte-1obivak")},m(o,c,u){l(o,e,c),a(e,n),a(e,r),a(e,i),v(i,t[7].label),u&&s(h),h=[p(n,"click",t[2](t[9])),p(i,"input",g)]},p(e,s){t=e,1&s&&o!==(o=`background-color:${t[7].color}`)&&m(n,"style",o),1&s&&i.value!==t[7].label&&v(i,t[7].label)},d(t){t&&u(e),s(h)}}}function ot(t){let e,n,o,r,i,c,h,g,$,v=t[0],b=[];for(let e=0;e<v.length;e+=1)b[e]=nt(et(t,v,e));const x=new V({props:{text:"Go",type:"submit"}});return{c(){e=f("main"),n=f("form");for(let t=0;t<b.length;t+=1)b[t].c();o=d(),r=f("fieldset"),i=f("input"),c=d(),h=f("fieldset"),N(x.$$.fragment),m(i,"placeholder","Add something"),i.autofocus=!0,m(i,"class","svelte-1obivak"),m(r,"class","svelte-1obivak"),m(h,"class","svelte-1obivak"),m(n,"class","svelte-1obivak"),m(e,"class","svelte-1obivak")},m(u,f,d){l(u,e,f),a(e,n);for(let t=0;t<b.length;t+=1)b[t].m(n,null);a(n,o),a(n,r),a(r,i),a(n,c),a(n,h),F(x,h,null),g=!0,i.focus(),d&&s($),$=[p(i,"input",t[1]),p(n,"submit",t[3])]},p(t,[e]){if(5&e){let s;for(v=t[0],s=0;s<v.length;s+=1){const r=et(t,v,s);b[s]?b[s].p(r,e):(b[s]=nt(r),b[s].c(),b[s].m(n,o))}for(;s<b.length;s+=1)b[s].d(1);b.length=v.length}},i(t){g||(H(x.$$.fragment,t),g=!0)},o(t){D(x.$$.fragment,t),g=!1},d(t){t&&u(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(b,t),W(x),s($)}}}function st(t,e,n){let{items:o}=e,{nextStep:s}=e,r=0;return t.$set=t=>{"items"in t&&n(0,o=t.items),"nextStep"in t&&n(4,s=t.nextStep)},[o,function(t){if(0===r){const e=new tt(t.target.value);n(0,o[o.length]=e,o),r=requestAnimationFrame(()=>{const n=t.target.form.querySelector("div:last-of-type>input:last-child");e.label=t.target.value,t.target.value="",r=0,n.focus()})}},function(t){return e=>{const[s]=o.splice(t,1);n(0,o)}},function(t){if(t.preventDefault(),o.length<2){const e=t.target.querySelector("fieldset:first-of-type>input");e.required=!0,e.addEventListener("input",()=>{e.required=!1},{passive:!0,once:!0}),t.target.reportValidity()}else s()},s,r,function(t){t.label=this.value,n(0,o)}]}class rt extends B{constructor(t){super(),Y(this,t,st,ot,i,{items:0,nextStep:4})}}function it(t,e,n,o){return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}}function ct(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("height",t),n.setAttribute("width",t);const o=2*Math.PI/e.length;return n.append(...e.map((e,n)=>{const s=document.createElementNS("http://www.w3.org/2000/svg","path");var r,i,c,a,l,u,f,h;return s.setAttribute("d",(a=o*n,u=it(r=t/2,i=t/2,c=t/4,l=o*(n+1)),f=it(r,i,c,a),h=Number((l-a)%360>180),["M",u.x,u.y,"A",c,c,0,h,0,f.x,f.y].join(" "))),s.setAttribute("stroke-width",t/2),s.setAttribute("stroke",e),s.setAttribute("fill","none"),s})),n}function at(e){let n;return{c(){n=f("main"),m(n,"class","svelte-109jkpb")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function lt(t,e,n){let{items:o}=e,{nextStep:s}=e;const r=t=>{const{length:e}=o,n=.75-t%1;return o[(Math.floor(n*e)+e)%e]};return y(()=>{const t=ct(.9*Math.min(window.innerHeight,window.innerWidth),o.map(t=>t.color));document.querySelector("main").append(t);const e=9*Math.random(),n=`rotate(${5+e}turn)`;if(Element.prototype.animate){t.animate({transform:["none",n]},{delay:1e3+1e3*Math.random(),duration:3e3+1e3*Math.random(),easing:"ease-out"}).addEventListener("finish",()=>{t.style.transform=n,setTimeout(()=>{s(r(e))},1e3*Math.random())})}else t.style.transition="transform 3s ease-out",setTimeout(()=>{t.style.transform=n},1e3+1e3*Math.random()),t.addEventListener("transitionend",()=>{setTimeout(()=>{s(r(e))},1e3*Math.random())})}),t.$set=t=>{"items"in t&&n(0,o=t.items),"nextStep"in t&&n(1,s=t.nextStep)},[o,s]}class ut extends B{constructor(t){super(),Y(this,t,lt,at,i,{items:0,nextStep:1})}}function ft(t){let e,n,o,s,r,i,c,p,g,v,b=t[1].label+"";const x=new V({props:{handleClick:t[0],text:"Restart",autofocus:!0}});return{c(){e=f("main"),n=f("h2"),o=h(b),r=d(),i=f("canvas"),c=d(),p=f("footer"),N(x.$$.fragment),m(n,"class","svelte-118b9qy"),m(e,"style",s=`--text-color: ${t[1].color}`),m(e,"class","svelte-118b9qy"),m(i,"id","confetti"),m(p,"style",g=`--bg-color: ${t[1].color}`),m(p,"class","svelte-118b9qy")},m(t,s){l(t,e,s),a(e,n),a(n,o),l(t,r,s),l(t,i,s),l(t,c,s),l(t,p,s),F(x,p,null),v=!0},p(t,[n]){(!v||2&n)&&b!==(b=t[1].label+"")&&$(o,b),(!v||2&n&&s!==(s=`--text-color: ${t[1].color}`))&&m(e,"style",s);const r={};1&n&&(r.handleClick=t[0]),x.$set(r),(!v||2&n&&g!==(g=`--bg-color: ${t[1].color}`))&&m(p,"style",g)},i(t){v||(H(x.$$.fragment,t),v=!0)},o(t){D(x.$$.fragment,t),v=!1},d(t){t&&u(e),t&&u(r),t&&u(i),t&&u(c),t&&u(p),W(x)}}}function ht(t,e,n){let{nextStep:o}=e,{winner:s}=e;return y(()=>new R(document.getElementById("confetti"),2)),t.$set=t=>{"nextStep"in t&&n(0,o=t.nextStep),"winner"in t&&n(1,s=t.winner)},[o,s]}class dt extends B{constructor(t){super(),Y(this,t,ht,ft,i,{nextStep:0,winner:1})}}function pt(t){let e;const n=new dt({props:{winner:t[0].winner,nextStep:t[5]}});return{c(){N(n.$$.fragment)},m(t,o){F(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.winner=t[0].winner),n.$set(o)},i(t){e||(H(n.$$.fragment,t),e=!0)},o(t){D(n.$$.fragment,t),e=!1},d(t){W(n,t)}}}function mt(e){let n;const o=new ut({props:{items:e[1],nextStep:e[4]}});return{c(){N(o.$$.fragment)},m(t,e){F(o,t,e),n=!0},p:t,i(t){n||(H(o.$$.fragment,t),n=!0)},o(t){D(o.$$.fragment,t),n=!1},d(t){W(o,t)}}}function gt(e){let n;const o=new rt({props:{items:e[1],nextStep:e[3]}});return{c(){N(o.$$.fragment)},m(t,e){F(o,t,e),n=!0},p:t,i(t){n||(H(o.$$.fragment,t),n=!0)},o(t){D(o.$$.fragment,t),n=!1},d(t){W(o,t)}}}function $t(e){let n;const o=new Q({props:{nextStep:e[2]}});return{c(){N(o.$$.fragment)},m(t,e){F(o,t,e),n=!0},p:t,i(t){n||(H(o.$$.fragment,t),n=!0)},o(t){D(o.$$.fragment,t),n=!1},d(t){W(o,t)}}}function vt(t){let e,n,o,r;const i=[$t,gt,mt,pt],c=[];function a(t,e){return t[0].home?0:t[0].fillItems?1:t[0].rollTheDice?2:t[0].celebrateWinner?3:-1}return~(e=a(t))&&(n=c[e]=i[e](t)),{c(){n&&n.c(),o=h("")},m(t,n){~e&&c[e].m(t,n),l(t,o,n),r=!0},p(t,[r]){let l=e;e=a(t),e===l?~e&&c[e].p(t,r):(n&&(L={r:0,c:[],p:L},D(c[l],1,1,()=>{c[l]=null}),L.r||s(L.c),L=L.p),~e?(n=c[e],n||(n=c[e]=i[e](t),n.c()),H(n,1),n.m(o.parentNode,o)):n=null)},i(t){r||(H(n),r=!0)},o(t){D(n),r=!1},d(t){~e&&c[e].d(t),t&&u(o)}}}function bt(t,e,n){let{state:o}=e;const s=[];return t.$set=t=>{"state"in t&&n(0,o=t.state)},[o,s,function(){n(0,o.home=!1,o),n(0,o.fillItems=!0,o)},function(){n(0,o.fillItems=!1,o),n(0,o.rollTheDice=!0,o)},function(t){n(0,o.rollTheDice=!1,o),n(0,o.celebrateWinner=!0,o),n(0,o.winner=t,o)},function(){n(0,o.celebrateWinner=!1,o),s.splice(0,s.length),n(0,o.fillItems=!0,o)}]}const xt=new class extends B{constructor(t){super(),Y(this,t,bt,vt,i,{state:0})}}({target:document.body,props:{state:{home:!0}}});return addEventListener("resize",()=>{document.body.style.maxHeight=window.innerHeight+"px"},{passive:!0}),xt}();
//# sourceMappingURL=bundle.js.map
