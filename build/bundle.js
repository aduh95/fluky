var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function c(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o||n[o]&&n[o].set?t[o]=e[o]:h(t,o,e[o])}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e){(null!=e||t.value)&&(t.value=e)}function b(t,e,n){t.classList[n?"add":"remove"](e)}let y;function v(t){y=t}function w(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const S=[],_=[],k=[],M=[],A=Promise.resolve();let E=!1;function q(t){k.push(t)}let C=!1;const T=new Set;function D(){if(!C){C=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];v(e),L(e.$$)}for(S.length=0;_.length;)_.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];T.has(e)||(T.add(e),e())}k.length=0}while(S.length);for(;M.length;)M.pop()();E=!1,C=!1,T.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const N=new Set;let I;function F(t,e){t&&t.i&&(N.delete(t),t.i(e))}function j(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),I.c.push(()=>{N.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function O(t){t&&t.c()}function W(t,e,o){const{fragment:l,on_mount:i,on_destroy:c,after_update:a}=t.$$;l&&l.m(e,o),q(()=>{const e=i.map(n).filter(s);c?c.push(...e):r(e),t.$$.on_mount=[]}),a.forEach(q)}function H(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(S.push(t),E||(E=!0,A.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,n,s,l,i,c,a=[-1]){const f=y;v(e);const d=n.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:o(),dirty:a};let m=!1;if(p.ctx=s?s(e,d,(t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(p.bound[t]&&p.bound[t](r),m&&P(e,t)),n}):[],p.update(),m=!0,r(p.before_update),p.fragment=!!l&&l(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();n.intro&&F(e.$$.fragment),W(e,n.target,n.anchor),D()}v(f)}class B{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function G(n){let o,r,l,i=[n[2]],p={};for(let t=0;t<i.length;t+=1)p=e(p,i[t]);return{c(){o=f("button"),r=d(n[1]),g(o,p),b(o,"svelte-38mrdy",!0)},m(t,e,i){a(t,o,e),c(o,r),i&&l(),l=m(o,"click",(function(){s(n[0])&&n[0].apply(this,arguments)}))},p(t,[e]){n=t,2&e&&$(r,n[1]),g(o,function(t,e){const n={},o={},r={$$scope:1};let s=t.length;for(;s--;){const l=t[s],i=e[s];if(i){for(const t in l)t in i||(o[t]=1);for(const t in i)r[t]||(n[t]=i[t],r[t]=1);t[s]=i}else for(const t in l)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(i,[4&e&&n[2]])),b(o,"svelte-38mrdy",!0)},i:t,o:t,d(t){t&&u(o),l()}}}function R(t,n,o){const r=["handleClick","text"];let s=i(n,r),{handleClick:l=Function.prototype}=n,{text:c}=n;return t.$set=t=>{n=e(e({},n),function(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}(t)),o(2,s=i(n,r)),"handleClick"in t&&o(0,l=t.handleClick),"text"in t&&o(1,c=t.text)},[l,c,s]}class V extends B{constructor(t){super(),z(this,t,R,G,l,{handleClick:0,text:1})}}function J(t){let e,n,o,r;const s=new V({props:{handleClick:t[0],text:"Start",autofocus:!0}});return{c(){e=f("header"),e.innerHTML='<h1 class="svelte-ix88dx">Fluky</h1> \n  <h4 class="svelte-ix88dx">Anything could happen</h4> \n  <p class="svelte-ix88dx">\n    This web app is a reproduction of\n    <a href="http://fluky.io" class="svelte-ix88dx">Fluky</a>\n    – a randomizer by\n    <a href="https://humblebee.se/" class="svelte-ix88dx">Humblebee</a>\n    – made as an exercise by\n    <a href="https://github.com/aduh95" class="svelte-ix88dx">aduh95</a></p>',n=p(),o=f("footer"),O(s.$$.fragment),h(e,"class","svelte-ix88dx"),h(o,"class","svelte-ix88dx")},m(t,l){a(t,e,l),a(t,n,l),a(t,o,l),W(s,o,null),r=!0},p(t,[e]){const n={};1&e&&(n.handleClick=t[0]),s.$set(n)},i(t){r||(F(s.$$.fragment,t),r=!0)},o(t){j(s.$$.fragment,t),r=!1},d(t){t&&u(e),t&&u(n),t&&u(o),H(s)}}}function K(t,e,n){let{nextStep:o}=e;return t.$set=t=>{"nextStep"in t&&n(0,o=t.nextStep)},[o]}class Q extends B{constructor(t){super(),z(this,t,K,J,l,{nextStep:0})}}const U=new Set;class X{constructor(t){this._color=function(){let t;do{t=16777215*Math.random()|0}while(U.has(t));return U.add(t),"#"+"0".repeat(6-Math.log2(t)/4)+t.toString(16)}(),this.label=t}get color(){return this._color}remove(){U.delete(this._color)}}function Y(t,e,n){const o=t.slice();return o[7]=e[n],o[8]=e,o[9]=n,o}function Z(t){let e,n,o,s,l,i,d;function g(){t[6].call(l,t[7])}return{c(){e=f("div"),n=f("input"),s=p(),l=f("input"),h(n,"type","button"),n.value="x",h(n,"title","Delete entry"),h(n,"style",o=`background-color:${t[7].color}`),h(n,"class","svelte-1sf4l7g"),h(l,"aria-label","Describe the item"),l.required=!0,h(l,"class","svelte-1sf4l7g"),h(e,"role","group"),h(e,"aria-label",i=`Item #${t[9]+1}`),h(e,"class","svelte-1sf4l7g")},m(o,i,u){a(o,e,i),c(e,n),c(e,s),c(e,l),x(l,t[7].label),u&&r(d),d=[m(n,"click",t[2](t[9])),m(l,"input",g)]},p(e,r){t=e,1&r&&o!==(o=`background-color:${t[7].color}`)&&h(n,"style",o),1&r&&l.value!==t[7].label&&x(l,t[7].label)},d(t){t&&u(e),r(d)}}}function tt(t){let e,n,o,s,l,i,d,g,$,x=t[0],b=[];for(let e=0;e<x.length;e+=1)b[e]=Z(Y(t,x,e));const y=new V({props:{text:"Go",type:"submit"}});return{c(){e=f("main"),n=f("form");for(let t=0;t<b.length;t+=1)b[t].c();o=p(),s=f("fieldset"),l=f("input"),i=p(),d=f("fieldset"),O(y.$$.fragment),h(l,"placeholder","Add something"),l.autofocus=!0,h(l,"class","svelte-1sf4l7g"),h(s,"class","svelte-1sf4l7g"),h(d,"class","svelte-1sf4l7g"),h(n,"class","svelte-1sf4l7g"),h(e,"class","svelte-1sf4l7g")},m(u,f,p){a(u,e,f),c(e,n);for(let t=0;t<b.length;t+=1)b[t].m(n,null);c(n,o),c(n,s),c(s,l),c(n,i),c(n,d),W(y,d,null),g=!0,l.focus(),p&&r($),$=[m(l,"input",t[1]),m(n,"submit",t[3])]},p(t,[e]){if(5&e){let r;for(x=t[0],r=0;r<x.length;r+=1){const s=Y(t,x,r);b[r]?b[r].p(s,e):(b[r]=Z(s),b[r].c(),b[r].m(n,o))}for(;r<b.length;r+=1)b[r].d(1);b.length=x.length}},i(t){g||(F(y.$$.fragment,t),g=!0)},o(t){j(y.$$.fragment,t),g=!1},d(t){t&&u(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(b,t),H(y),r($)}}}function et(t,e,n){let{items:o}=e,{nextStep:r}=e,s=0;return t.$set=t=>{"items"in t&&n(0,o=t.items),"nextStep"in t&&n(4,r=t.nextStep)},[o,function(t){if(0===s){const e=new X(t.target.value);n(0,o[o.length]=e,o),s=requestAnimationFrame(()=>{const n=t.target.form.querySelector("div:last-of-type>input:last-child");e.label=t.target.value,t.target.value="",s=0,n.focus()})}},function(t){return e=>{const[r]=o.splice(t,1);n(0,o),r.remove()}},function(t){if(t.preventDefault(),o.length<2){const e=t.target.querySelector("fieldset:first-of-type>input");e.required=!0,e.addEventListener("input",()=>{e.required=!1},{passive:!0,once:!0}),t.target.reportValidity()}else r()},r,s,function(t){t.label=this.value,n(0,o)}]}class nt extends B{constructor(t){super(),z(this,t,et,tt,l,{items:0,nextStep:4})}}function ot(t,e,n,o){return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}}function rt(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("height",t),n.setAttribute("width",t);const o=2*Math.PI/e.length;return n.append(...e.map((e,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","path");var s,l,i,c,a,u,f,d;return r.setAttribute("d",(c=o*n,u=ot(s=t/2,l=t/2,i=t/4,a=o*(n+1)),f=ot(s,l,i,c),d=Number((a-c)%360>180),["M",u.x,u.y,"A",i,i,0,d,0,f.x,f.y].join(" "))),r.setAttribute("stroke-width",t/2),r.setAttribute("stroke",e),r.setAttribute("fill","none"),r})),n}function st(e){let n;return{c(){n=f("main"),h(n,"class","svelte-12t5232")},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function lt(t,e,n){let{items:o}=e,{nextStep:r}=e;const s=t=>{const{length:e}=o,n=.75-t%1;return o[(Math.floor(n*e)+e)%e]};return w(()=>{const t=rt(.9*Math.min(window.innerHeight,window.innerWidth),o.map(t=>t.color));document.querySelector("main").append(t);const e=9*Math.random(),n=`rotate(${5+e}turn)`;if(Element.prototype.animate){t.animate({transform:["none",n]},{delay:1e3+1e3*Math.random(),duration:3e3+1e3*Math.random(),easing:"ease-out"}).addEventListener("finish",()=>{t.style.transform=n,setTimeout(()=>{r(s(e))},1e3*Math.random())})}else t.style.transition="transform 3s ease-out",setTimeout(()=>{t.style.transform=n},1e3+1e3*Math.random()),t.addEventListener("transitionend",()=>{setTimeout(()=>{r(s(e))},1e3*Math.random())})}),t.$set=t=>{"items"in t&&n(0,o=t.items),"nextStep"in t&&n(1,r=t.nextStep)},[o,r]}class it extends B{constructor(t){super(),z(this,t,lt,st,l,{items:0,nextStep:1})}}function ct(t){let e,n,o,r,s,l,i,m,g=t[1].label+"";const x=new V({props:{handleClick:t[0],text:"Restart",autofocus:!0}});return{c(){e=f("main"),n=f("h2"),o=d(g),s=p(),l=f("footer"),O(x.$$.fragment),h(n,"class","svelte-118b9qy"),h(e,"style",r=`--text-color: ${t[1].color}`),h(e,"class","svelte-118b9qy"),h(l,"style",i=`--bg-color: ${t[1].color}`),h(l,"class","svelte-118b9qy")},m(t,r){a(t,e,r),c(e,n),c(n,o),a(t,s,r),a(t,l,r),W(x,l,null),m=!0},p(t,[n]){(!m||2&n)&&g!==(g=t[1].label+"")&&$(o,g),(!m||2&n&&r!==(r=`--text-color: ${t[1].color}`))&&h(e,"style",r);const s={};1&n&&(s.handleClick=t[0]),x.$set(s),(!m||2&n&&i!==(i=`--bg-color: ${t[1].color}`))&&h(l,"style",i)},i(t){m||(F(x.$$.fragment,t),m=!0)},o(t){j(x.$$.fragment,t),m=!1},d(t){t&&u(e),t&&u(s),t&&u(l),H(x)}}}function at(t,e,n){let{nextStep:o}=e,{winner:r}=e;return t.$set=t=>{"nextStep"in t&&n(0,o=t.nextStep),"winner"in t&&n(1,r=t.winner)},[o,r]}class ut extends B{constructor(t){super(),z(this,t,at,ct,l,{nextStep:0,winner:1})}}function ft(t){let e;const n=new ut({props:{winner:t[0].winner,nextStep:t[5]}});return{c(){O(n.$$.fragment)},m(t,o){W(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.winner=t[0].winner),n.$set(o)},i(t){e||(F(n.$$.fragment,t),e=!0)},o(t){j(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function dt(e){let n;const o=new it({props:{items:e[1],nextStep:e[4]}});return{c(){O(o.$$.fragment)},m(t,e){W(o,t,e),n=!0},p:t,i(t){n||(F(o.$$.fragment,t),n=!0)},o(t){j(o.$$.fragment,t),n=!1},d(t){H(o,t)}}}function pt(e){let n;const o=new nt({props:{items:e[1],nextStep:e[3]}});return{c(){O(o.$$.fragment)},m(t,e){W(o,t,e),n=!0},p:t,i(t){n||(F(o.$$.fragment,t),n=!0)},o(t){j(o.$$.fragment,t),n=!1},d(t){H(o,t)}}}function mt(e){let n;const o=new Q({props:{nextStep:e[2]}});return{c(){O(o.$$.fragment)},m(t,e){W(o,t,e),n=!0},p:t,i(t){n||(F(o.$$.fragment,t),n=!0)},o(t){j(o.$$.fragment,t),n=!1},d(t){H(o,t)}}}function ht(t){let e,n,o,s;const l=[mt,pt,dt,ft],i=[];function c(t,e){return t[0].home?0:t[0].fillItems?1:t[0].rollTheDice?2:t[0].celebrateWinner?3:-1}return~(e=c(t))&&(n=i[e]=l[e](t)),{c(){n&&n.c(),o=d("")},m(t,n){~e&&i[e].m(t,n),a(t,o,n),s=!0},p(t,[s]){let a=e;e=c(t),e===a?~e&&i[e].p(t,s):(n&&(I={r:0,c:[],p:I},j(i[a],1,1,()=>{i[a]=null}),I.r||r(I.c),I=I.p),~e?(n=i[e],n||(n=i[e]=l[e](t),n.c()),F(n,1),n.m(o.parentNode,o)):n=null)},i(t){s||(F(n),s=!0)},o(t){j(n),s=!1},d(t){~e&&i[e].d(t),t&&u(o)}}}function gt(t,e,n){let{state:o}=e;const r=[];return t.$set=t=>{"state"in t&&n(0,o=t.state)},[o,r,function(){n(0,o.home=!1,o),n(0,o.fillItems=!0,o)},function(){n(0,o.fillItems=!1,o),n(0,o.rollTheDice=!0,o)},function(t){n(0,o.rollTheDice=!1,o),n(0,o.celebrateWinner=!0,o),n(0,o.winner=t,o)},function(){n(0,o.celebrateWinner=!1,o),r.splice(0,r.length),n(0,o.fillItems=!0,o)}]}return new class extends B{constructor(t){super(),z(this,t,gt,ht,l,{state:0})}}({target:document.body,props:{state:{home:!0}}})}();
//# sourceMappingURL=bundle.js.map
