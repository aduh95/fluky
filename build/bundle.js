var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o||n[o]&&n[o].set?t[o]=e[o]:p(t,o,e[o])}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function b(t,e){(null!=e||t.value)&&(t.value=e)}function v(t,e,n){t.classList[n?"add":"remove"](e)}let w;function x(t){w=t}function y(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const _=[],S=[],M=[],E=[],k=Promise.resolve();let I=!1;function j(t){M.push(t)}let A=!1;const z=new Set;function T(){if(!A){A=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];x(e),L(e.$$)}for(_.length=0;S.length;)S.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];z.has(e)||(z.add(e),e())}M.length=0}while(_.length);for(;E.length;)E.pop()();I=!1,A=!1,z.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const C=new Set;let G;function q(t,e){t&&t.i&&(C.delete(t),t.i(e))}function H(t,e,n,o){if(t&&t.o){if(C.has(t))return;C.add(t),G.c.push(()=>{C.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function F(t){t&&t.c()}function W(t,e,o){const{fragment:s,on_mount:a,on_destroy:c,after_update:l}=t.$$;s&&s.m(e,o),j(()=>{const e=a.map(n).filter(i);c?c.push(...e):r(e),t.$$.on_mount=[]}),l.forEach(j)}function D(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function N(t,e){-1===t.$$.dirty[0]&&(_.push(t),I||(I=!0,k.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,n,i,s,a,c,l=[-1]){const d=w;x(e);const f=n.props||{},h=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:o(),dirty:l};let m=!1;if(h.ctx=i?i(e,f,(t,n,...o)=>{const r=o.length?o[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=r)&&(h.bound[t]&&h.bound[t](r),m&&N(e,t)),n}):[],h.update(),m=!0,r(h.before_update),h.fragment=!!s&&s(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();n.intro&&q(e.$$.fragment),W(e,n.target,n.anchor),T()}x(d)}class P{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}class Y{constructor(t,e,n=function(){const t=16777215*Math.random()|0;return"#"+"0".repeat(Math.ceil(6-Math.log2(t)/4)-1)+t.toString(16)}()){this._color=n,this._speed=Math.random()*e+.125,this._seed=Math.random(),this._offset=65535*Math.random()|0,this._positionX=this._offset,this._positionY=(1-this._seed-this._offset%3)*t,this._positionZ=Math.random()+.3}draw(t,e,{width:n,height:o},r){if(this._positionY+=r*this._speed,this._positionY<o)return;const i=Math.cos((e+this._offset)/100);this._positionX+=(i+this._seed-.5)*(Math.sin(4095*this._seed)%1),t.fillStyle=this._color,t.setTransform(1,1-i,i,1,this._positionX%(n+5),this._positionY%(o+10)-10),t.fillRect(0,0,5*this._positionZ,10*this._positionZ)}}class O{constructor(t,e,n){this._canvas=t,this._context=this._canvas.getContext("2d"),this._skewIndex=0;const o=e*e/5/10,r=Math.sqrt(window.innerWidth*window.innerHeight*o);this._confetti=Array.from({length:r},()=>new Y(window.innerHeight,e,n)),this._draw=this.draw.bind(this),requestAnimationFrame(t=>{this._lastTimestamp=t,this.updateCanvasSize()}),addEventListener("resize",this.updateCanvasSize.bind(this),{passive:!0})}draw(t=this._lastTimestamp){const{width:e,height:n}=this._canvas,o=this._context,r=this._skewIndex++;o.resetTransform(),o.clearRect(0,0,e,n),this._confetti.forEach(i=>i.draw(o,r,{width:e,height:n},t-this._lastTimestamp)),this._lastTimestamp=t,requestAnimationFrame(this._draw)}updateCanvasSize(){this._canvas.height=document.documentElement.clientHeight,this._canvas.width=document.documentElement.clientWidth,this.draw()}}function R(n){let o,r,s,a=[n[2]],h={};for(let t=0;t<a.length;t+=1)h=e(h,a[t]);return{c(){o=d("button"),r=f(n[1]),g(o,h),v(o,"svelte-c88ozc",!0)},m(t,e,a){l(t,o,e),c(o,r),a&&s(),s=m(o,"click",(function(){i(n[0])&&n[0].apply(this,arguments)}))},p(t,[e]){n=t,2&e&&$(r,n[1]),g(o,function(t,e){const n={},o={},r={$$scope:1};let i=t.length;for(;i--;){const s=t[i],a=e[i];if(a){for(const t in s)t in a||(o[t]=1);for(const t in a)r[t]||(n[t]=a[t],r[t]=1);t[i]=a}else for(const t in s)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(a,[4&e&&n[2]])),v(o,"svelte-c88ozc",!0)},i:t,o:t,d(t){t&&u(o),s()}}}function X(t,n,o){const r=["handleClick","text"];let i=a(n,r),{handleClick:s=Function.prototype}=n,{text:c}=n;return t.$set=t=>{n=e(e({},n),function(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}(t)),o(2,i=a(n,r)),"handleClick"in t&&o(0,s=t.handleClick),"text"in t&&o(1,c=t.text)},[s,c,i]}class Z extends P{constructor(t){super(),B(this,t,X,R,s,{handleClick:0,text:1})}}function V(t){let e,n,o,r,i,s;const a=new Z({props:{handleClick:t[0],text:"Start",autofocus:!0}});return{c(){e=d("header"),e.innerHTML='<h1 class="svelte-19xjjuz">Fluky</h1> \n  <h4 class="svelte-19xjjuz">Anything could happen</h4> \n  <p class="svelte-19xjjuz">\n    This web app is a reproduction of\n    <a href="http://fluky.io" class="svelte-19xjjuz">Fluky</a>\n    – a randomizer by\n    <a href="https://humblebee.se/" class="svelte-19xjjuz">Humblebee</a>\n    – made as an exercise by\n    <a href="https://github.com/aduh95" class="svelte-19xjjuz">aduh95</a></p>',n=h(),o=d("canvas"),r=h(),i=d("footer"),F(a.$$.fragment),p(e,"class","svelte-19xjjuz"),p(o,"id","confetti"),p(o,"aria-label","Falling confetti"),p(i,"class","svelte-19xjjuz")},m(t,c){l(t,e,c),l(t,n,c),l(t,o,c),l(t,r,c),l(t,i,c),W(a,i,null),s=!0},p(t,[e]){const n={};1&e&&(n.handleClick=t[0]),a.$set(n)},i(t){s||(q(a.$$.fragment,t),s=!0)},o(t){H(a.$$.fragment,t),s=!1},d(t){t&&u(e),t&&u(n),t&&u(o),t&&u(r),t&&u(i),D(a)}}}function J(t,e,n){let{nextStep:o}=e;return y(()=>new O(document.getElementById("confetti"),.12,"#95dbb7")),t.$set=t=>{"nextStep"in t&&n(0,o=t.nextStep)},[o]}class K extends P{constructor(t){super(),B(this,t,J,V,s,{nextStep:0})}}const Q=[{min:0,max:60,aGradient:.00533868,aIntercept:-.06198633,bGradient:-.005494084,bIntercept:.060984323},{min:60,max:120,aGradient:-964304e-9,aIntercept:.156285941,bGradient:.001229152,bIntercept:-.176667868},{min:120,max:180,aGradient:341357e-9,aIntercept:868722e-9,bGradient:-441242e-9,bIntercept:.020208875},{min:180,max:240,aGradient:-.004097794,aIntercept:.753975725,bGradient:.002574875,bIntercept:-.522826186},{min:240,max:300,aGradient:632425e-9,aIntercept:-.37230259,bGradient:6e-4,bIntercept:-.05},{min:300,max:360,aGradient:-.001,aIntercept:.31,bGradient:.001918519,bIntercept:-.62519087}];const U=function*(t=Math.random()){const e=(1+Math.sqrt(5))/2;for(;;)yield t+=e}();function tt(){const t=U.next().value,e=.8*Math.random()+.1;return`hsl(${t}turn,${100*e}%,${100*(Math.random()*(function(t,e){const{aGradient:n,aIntercept:o,bGradient:r,bIntercept:i}=Q.find(({min:e,max:n})=>n>=t&&e<=t);return(n*t+o)*e*e+(r*t+i)*e+.34806606292724607}(t,e)-.1)+.1)}%)`}class et{constructor(t){this._color=tt(),this.label=t}get color(){return this._color}}function nt(t,e,n){const o=t.slice();return o[7]=e[n],o[8]=e,o[9]=n,o}function ot(t){let e,n,o,i,s,a,f;function g(){t[6].call(i,t[7])}return{c(){e=d("div"),n=d("input"),o=h(),i=d("input"),p(n,"type","button"),n.value="x",p(n,"title","Delete entry"),p(n,"class","svelte-1yeh2om"),p(i,"aria-label","Describe the item"),i.required=!0,p(i,"type","text"),p(i,"class","svelte-1yeh2om"),p(e,"role","group"),p(e,"aria-label",s=`Item #${t[9]+1}`),p(e,"style",a=`--bg-color:${t[7].color}`),p(e,"class","svelte-1yeh2om")},m(s,a,u){l(s,e,a),c(e,n),c(e,o),c(e,i),b(i,t[7].label),u&&r(f),f=[m(n,"click",t[2](t[9])),m(i,"input",g)]},p(n,o){t=n,1&o&&i.value!==t[7].label&&b(i,t[7].label),1&o&&a!==(a=`--bg-color:${t[7].color}`)&&p(e,"style",a)},d(t){t&&u(e),r(f)}}}function rt(t){let e,n,o,i,s,a,f,g,$,b=t[0],v=[];for(let e=0;e<b.length;e+=1)v[e]=ot(nt(t,b,e));const w=new Z({props:{text:"Go",type:"submit"}});return{c(){e=d("main"),n=d("form");for(let t=0;t<v.length;t+=1)v[t].c();o=h(),i=d("fieldset"),s=d("input"),a=h(),f=d("footer"),F(w.$$.fragment),p(s,"placeholder","Add something"),s.autofocus=!0,p(s,"class","svelte-1yeh2om"),p(i,"aria-label","Add new element to the list"),p(i,"class","svelte-1yeh2om"),p(f,"class","svelte-1yeh2om"),p(n,"class","svelte-1yeh2om"),p(e,"class","svelte-1yeh2om")},m(u,d,h){l(u,e,d),c(e,n);for(let t=0;t<v.length;t+=1)v[t].m(n,null);c(n,o),c(n,i),c(i,s),c(n,a),c(n,f),W(w,f,null),g=!0,s.focus(),h&&r($),$=[m(s,"input",t[1]),m(n,"submit",t[3])]},p(t,[e]){if(5&e){let r;for(b=t[0],r=0;r<b.length;r+=1){const i=nt(t,b,r);v[r]?v[r].p(i,e):(v[r]=ot(i),v[r].c(),v[r].m(n,o))}for(;r<v.length;r+=1)v[r].d(1);v.length=b.length}},i(t){g||(q(w.$$.fragment,t),g=!0)},o(t){H(w.$$.fragment,t),g=!1},d(t){t&&u(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(v,t),D(w),r($)}}}function it(t,e,n){let{items:o}=e,{nextStep:r}=e,i=0;return t.$set=t=>{"items"in t&&n(0,o=t.items),"nextStep"in t&&n(4,r=t.nextStep)},[o,function(t){if(0===i){const e=new et(t.target.value);n(0,o[o.length]=e,o),i=requestAnimationFrame(()=>{const n=t.target.form.querySelector("div:last-of-type>input:last-child");e.label=t.target.value,t.target.value="",i=0,n.focus()})}},function(t){return e=>{const[r]=o.splice(t,1);n(0,o)}},function(t){if(t.preventDefault(),o.length<2){const e=t.target.querySelector("fieldset:first-of-type>input");e.required=!0,e.addEventListener("input",()=>{e.required=!1},{passive:!0,once:!0}),t.target.reportValidity()}else r()},r,i,function(t){t.label=this.value,n(0,o)}]}class st extends P{constructor(t){super(),B(this,t,it,rt,s,{items:0,nextStep:4})}}function at(t,e,n,o){return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}}function ct(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("height",t),n.setAttribute("width",t);const o=2*Math.PI/e.length;return n.append(...e.map((e,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","path");var i,s,a,c,l,u,d,f;return r.setAttribute("d",(c=o*n,u=at(i=t/2,s=t/2,a=t/4,l=o*(n+1)),d=at(i,s,a,c),f=Number((l-c)%360>180),["M",u.x,u.y,"A",a,a,0,f,0,d.x,d.y].join(" "))),r.setAttribute("stroke-width",t/2),r.setAttribute("stroke",e),r.setAttribute("fill","none"),r})),n}function lt(e){let n;return{c(){n=d("main"),p(n,"class","svelte-109jkpb")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function ut(t,e,n){let{items:o}=e,{nextStep:r}=e;const i=t=>{const{length:e}=o,n=.75-t%1;return o[(Math.floor(n*e)+e)%e]};return y(()=>{const t=ct(.9*Math.min(window.innerHeight,window.innerWidth),o.map(t=>t.color));t.setAttribute("aria-label","Rolling wheel");for(const e of t.children)e.setAttribute("role","presentation");document.querySelector("main").append(t);const e=9*Math.random(),n=`rotate(${5+e}turn)`;if(Element.prototype.animate){t.animate({transform:["none",n]},{delay:1e3+1e3*Math.random(),duration:3e3+1e3*Math.random(),easing:"ease-out"}).addEventListener("finish",()=>{t.style.transform=n,setTimeout(()=>{r(i(e))},1e3*Math.random())})}else t.style.transition="transform 3s ease-out",setTimeout(()=>{t.style.transform=n},1e3+1e3*Math.random()),t.addEventListener("transitionend",()=>{setTimeout(()=>{r(i(e))},1e3*Math.random())})}),t.$set=t=>{"items"in t&&n(0,o=t.items),"nextStep"in t&&n(1,r=t.nextStep)},[o,r]}class dt extends P{constructor(t){super(),B(this,t,ut,lt,s,{items:0,nextStep:1})}}function ft(t){let e,n,o,r,i,s,a,g,b,v,w,x,y,_=t[1].label+"";const S=new Z({props:{handleClick:t[0],text:"Restart",autofocus:!0,style:"--bg-color:#fff"}});return{c(){e=d("main"),n=d("h2"),o=f(_),r=h(),i=d("audio"),i.innerHTML='<source src="cheer.mp3" type="audio/mpeg"><source src="cheer.ogg" type="audio/ogg">\n    Your browser does not support this audio format.\n  ',s=h(),a=d("button"),a.innerHTML='<svg aria-hidden="true" data-icon="volume-mute" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74\n        24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47\n        40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64\n        256l45.64-45.64c6.3-6.3 6.3-16.52\n        0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416\n        210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3\n        16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82\n        22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3\n        22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"></path></svg>',g=h(),b=d("canvas"),v=h(),w=d("footer"),F(S.$$.fragment),p(n,"class","svelte-driawe"),p(i,"id","cheer"),i.autoplay=!0,a.hidden=!0,p(a,"class","svelte-driawe"),p(e,"class","svelte-driawe"),p(b,"id","confetti"),p(b,"aria-label","Falling confetti"),p(w,"class","svelte-driawe")},m(t,u,d){l(t,e,u),c(e,n),c(n,o),c(e,r),c(e,i),c(e,s),c(e,a),l(t,g,u),l(t,b,u),l(t,v,u),l(t,w,u),W(S,w,null),x=!0,d&&y(),y=m(a,"click",ht)},p(t,[e]){(!x||2&e)&&_!==(_=t[1].label+"")&&$(o,_);const n={};1&e&&(n.handleClick=t[0]),S.$set(n)},i(t){x||(q(S.$$.fragment,t),x=!0)},o(t){H(S.$$.fragment,t),x=!1},d(t){t&&u(e),t&&u(g),t&&u(b),t&&u(v),t&&u(w),D(S),y()}}}function ht(){document.getElementById("cheer").remove(),this.remove()}function mt(t,e,n){let{nextStep:o}=e,{winner:r}=e;return y(()=>{new O(document.getElementById("confetti"),.66),document.documentElement.style.setProperty("--bg-color",r.color),document.getElementById("cheer").addEventListener("canplaythrough",t=>{t.target.paused?ht.call(t.target.nextElementSibling):t.target.nextElementSibling.hidden=!1})}),t.$set=t=>{"nextStep"in t&&n(0,o=t.nextStep),"winner"in t&&n(1,r=t.winner)},[o,r]}class pt extends P{constructor(t){super(),B(this,t,mt,ft,s,{nextStep:0,winner:1})}}function gt(t){let e;const n=new pt({props:{winner:t[0].winner,nextStep:t[5]}});return{c(){F(n.$$.fragment)},m(t,o){W(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.winner=t[0].winner),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){H(n.$$.fragment,t),e=!1},d(t){D(n,t)}}}function $t(e){let n;const o=new dt({props:{items:e[1],nextStep:e[4]}});return{c(){F(o.$$.fragment)},m(t,e){W(o,t,e),n=!0},p:t,i(t){n||(q(o.$$.fragment,t),n=!0)},o(t){H(o.$$.fragment,t),n=!1},d(t){D(o,t)}}}function bt(e){let n;const o=new st({props:{items:e[1],nextStep:e[3]}});return{c(){F(o.$$.fragment)},m(t,e){W(o,t,e),n=!0},p:t,i(t){n||(q(o.$$.fragment,t),n=!0)},o(t){H(o.$$.fragment,t),n=!1},d(t){D(o,t)}}}function vt(e){let n;const o=new K({props:{nextStep:e[2]}});return{c(){F(o.$$.fragment)},m(t,e){W(o,t,e),n=!0},p:t,i(t){n||(q(o.$$.fragment,t),n=!0)},o(t){H(o.$$.fragment,t),n=!1},d(t){D(o,t)}}}function wt(t){let e,n,o,i;const s=[vt,bt,$t,gt],a=[];function c(t,e){return t[0].home?0:t[0].fillItems?1:t[0].rollTheDice?2:t[0].celebrateWinner?3:-1}return~(e=c(t))&&(n=a[e]=s[e](t)),{c(){n&&n.c(),o=f("")},m(t,n){~e&&a[e].m(t,n),l(t,o,n),i=!0},p(t,[i]){let l=e;e=c(t),e===l?~e&&a[e].p(t,i):(n&&(G={r:0,c:[],p:G},H(a[l],1,1,()=>{a[l]=null}),G.r||r(G.c),G=G.p),~e?(n=a[e],n||(n=a[e]=s[e](t),n.c()),q(n,1),n.m(o.parentNode,o)):n=null)},i(t){i||(q(n),i=!0)},o(t){H(n),i=!1},d(t){~e&&a[e].d(t),t&&u(o)}}}function xt(t,e,n){let{state:o}=e;const r=[];return t.$set=t=>{"state"in t&&n(0,o=t.state)},[o,r,function(){n(0,o.home=!1,o),n(0,o.fillItems=!0,o)},function(){n(0,o.fillItems=!1,o),n(0,o.rollTheDice=!0,o)},function(t){n(0,o.rollTheDice=!1,o),n(0,o.celebrateWinner=!0,o),n(0,o.winner=t,o)},function(){n(0,o.celebrateWinner=!1,o),r.splice(0,r.length),n(0,o.fillItems=!0,o),document.documentElement.style.removeProperty("--bg-color")}]}"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js",{scope:"./"}).then(()=>console.info("Service worker installed successfully.")).catch(t=>console.warn("Service worker installation failed.",t));const yt=new class extends P{constructor(t){super(),B(this,t,xt,wt,s,{state:0})}}({target:document.body,props:{state:{home:!0}}});return addEventListener("resize",()=>{document.body.style.maxHeight=window.innerHeight+"px"},{passive:!0}),yt}();
//# sourceMappingURL=bundle.js.map
